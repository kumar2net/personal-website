<!doctype html>
<html lang="en">
    <head>
        <!-- Critical resource hints -->
        <link
            rel="preconnect"
            href="https://www.googletagmanager.com"
            crossorigin
        />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="dns-prefetch" href="https://www.googletagmanager.com" />
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" />
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" />
        <!-- Google tag (gtag.js) - Only load in production -->
        <script>
            // Only load Google Analytics in production
            if (
                window.location.hostname !== "localhost" &&
                window.location.hostname !== "127.0.0.1"
            ) {
                const script = document.createElement("script");
                script.async = true;
                script.src =
                    "https://www.googletagmanager.com/gtag/js?id=G-PZ37S6E5BL";
                document.head.appendChild(script);

                window.dataLayer = window.dataLayer || [];
                function gtag() {
                    dataLayer.push(arguments);
                }
                gtag("js", new Date());
                gtag("config", "G-PZ37S6E5BL");
            } else {
                // Development mode - create no-op gtag function
                window.dataLayer = window.dataLayer || [];
                function gtag() {
                    /* no-op in development */
                }
                window.gtag = gtag;
                console.log("Google Analytics disabled in development mode");
            }
        </script>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta
            name="viewport"
            content="width=device-width, initial-scale=1, viewport-fit=cover"
        />

        <meta name="msvalidate.01" content="779D92B78E4F7E9476793C0B87A8819C" />
        <title>My Stories</title>
        <style>
            /* Critical CSS for faster rendering */
            html,
            body {
                height: 100%;
                margin: 0;
                padding: 0;
                overflow-x: hidden;
                font-family:
                    system-ui,
                    -apple-system,
                    sans-serif;
                background-color: #f9fafb;
                color: #1f2937;
            }
            #root {
                min-height: 100vh;
                display: flex;
                flex-direction: column;
            }
            /* Prevent blank screen on mobile */
            .mobile-fix {
                -webkit-transform: translateZ(0);
                transform: translateZ(0);
                -webkit-backface-visibility: hidden;
                backface-visibility: hidden;
            }
            /* Loading spinner for better UX */
            .loading-spinner {
                display: inline-block;
                width: 32px;
                height: 32px;
                border: 3px solid #e5e7eb;
                border-radius: 50%;
                border-top-color: #3b82f6;
                animation: spin 1s ease-in-out infinite;
            }
            @keyframes spin {
                to {
                    transform: rotate(360deg);
                }
            }
        </style>
        <!-- Removed legacy custom analytics tracker in favor of GA4 -->
        <!-- Auth0 will be configured via Netlify Auth0 extension -->
    </head>
    <body>
        <div id="root"></div>
        <script type="module" src="/src/main.jsx" crossorigin></script>

        <!-- Hidden form for Netlify Forms detection -->
        <form name="blog-comments" netlify netlify-honeypot="bot-field" hidden>
            <input type="text" name="name" />
            <input type="text" name="comment" />
            <input type="text" name="post-slug" />
            <input type="text" name="timestamp" />
        </form>
    </body>
</html>
